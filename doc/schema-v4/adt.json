{
    "$defs": {
        "Adt": {
            "type": "object",
            "properties": {
                "name": { "$ref": "common.json#/$defs/DefId"},
                "kind": { "$ref": "#/$defs/AdtKind" },
                "variants": {
                    "type": "array",
                    "items": { "$ref": "#/$defs/Variant" }
                },
                "size": { "type": "number" },
                "repr_transparent": { "type": "boolean" },
                "orig_def_id": { "$ref": "common.json#/$defs/DefId" },
                "orig_args": {
                    "type": "array",
                    "iterms": "common.json#/$defs/Ty"
                }
            },
            "required": [ "name", "kind", "variants", "size", "repr_transparent", "orig_def_id", "orig_args" ],
            "additionalProperties": false
        },

        "AdtKind": {
            "type": "object",
            "oneOf": [
                {
                    "properties": {
                        "kind": { "enum": ["Struct", "Union"] }
                    }
                },
                {
                    "properties": {
                        "kind": { "const": "Enum" },
                        "discr_ty": { "$ref": "common.json#/$defs/Ty" }
                    },
                    "required": ["discr_ty"]
                }
            ],
            "required": ["kind"],
            "unevaluatedProperties": false
        },

        "Variant": {
            "type": "object",
            "properties": {
                "name": { "$ref": "common.json#/$defs/DefId" },
                "discr": { "$ref": "#/$defs/VariantDiscr" },
                "fields": {
                    "type": "array",
                    "items": { "$ref": "#/$defs/Field" }
                },
                "ctor_kind": { "oneOf": [ {"type":"null"}, { "$ref": "#/$defs/CtorKind" } ] },
                "discr_value": { "type": ["null","string"] },
                "inhabited": { "type": "boolean" }
            },
            "required": [ "name", "discr", "fields", "ctor_kind", "inhabited" ],
            "additionalProperties": false
        },
        "VariantDiscr": {
            "type": "object",
            "oneOf": [
                {
                    "properties": {
                        "kind": { "const": "Explicit" },
                        "name": { "$ref": "common.json#/$defs/DefId" }
                    },
                    "required": [ "name" ]
                },
                {
                    "properties": {
                        "kind": { "const": "Relative" },
                        "index": { "type": "number" }
                    },
                    "required": [ "index" ]
                }
            ],
            "required": ["kind"],
            "unevaluatedProperties": false
        },
        "Field": {
            "type": "object",
            "properties": {
                "name": { "$ref": "common.json#/$defs/DefId" },
                "ty": { "$ref": "common.json#/$defs/Ty" }
            },
            "required": [ "name", "ty" ],
            "additionalProperies": false

        },
        "CtorKind": {
            "type": "object",
            "properties": {
                "kind": { "enum": [ "Fn", "Const" ] }
            },
            "additionalProperies": false
        }
    }
}